---
layout: single
title: test
date: 2018-10-18 13:37:37 +0059
category: 
tags: []
---

# A Free Powershell Repository with CI CD
### ...and I do most of the work for you (Part 1 of 2 - the Nuget Server)


That sounds like an emmy award winning blog right there !

My main reason for writing this blog, much like a lot of people’s is:

~~I really want Microsoft to give me an MVP~~    
Love.
 
 Okay it’s more it was way more hassle than I expected for some bits of it so thought I’d write it down in case I forget about it.  Plus it’s a chance to automate some stuff. 
 
 Big thanks to both Microsofts doc and Kevin Mar blog who gave me the leg up to get started.  
 I’m not going to go into why you might want your own repository rather than just stuffing your files into one big sock under your bed, this is just the technical part of getting it together.
 
 
### What you get in this post
	- Instructions and scripts on how to setup a free Nuget server in an Azure WebApp with a CICD pipeline in Azure Devops (formally VSTS)


### What you don’t get in this post (links tho!)
	- Why you want a repo
	- How to setup an Azure account
	- How to setup an Azure Devops account 
	- How to add your new repo (part 2)
	- How to push packages to your Server (that’s in part 2)


### Requirements:
	- Azure subscription (Free)
	- Azure Devops (Free)
	- Visual Studio 2017 (Free) 
	- A weak lemon drink. (small but worthwhile cost)


### High Level Step by Step:
	1. Create Resource Group , Webapp Plan (F1), Webapp in Azure
	2. Create Service Principal, make Owner of Resource Group 
	3. Create Repo in Azure Devops  
	4. Create Service Endpoint for the Resource Group, using the Service Principal
	5. Create Yaml build - give sample yaml  
	6. Switch on CI
	7. Clone Repo down in Visual Studio 2017
	8. New Asp.net Empty 
	9. Add Nuget.Server package 
	10. Powershell  New-Guid 
	11. Use Guid as API key in webconfig 		//improve this 
	12. Commit and Sync
	13. Build should complete
	14. Create Release pipeline > to  Azure Webapp with CI
	15. Pick the Service Endpoint created in Azure Webapp settings.  
	16. Do Release ,  should now be up and running.


